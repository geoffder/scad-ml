<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>index (scad_ml.index)</title><link rel="stylesheet" href="../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ scad_ml</nav><header class="odoc-preamble"><h1 id="scad_ml"><a href="#scad_ml" class="anchor"></a>Scad_ml</h1><p>Scad_ml is a OCaml DSL for the <a href="https://openscad.org/">OpenSCAD</a> solid modelling language.</p></header><nav class="odoc-toc"><ul><li><a href="#notable-difference-from-the-openscad-language">Notable difference from the OpenSCAD language</a></li><li><a href="#usage">Usage</a></li><li><a href="#api">API</a><ul><li><a href="#core-dsl">Core DSL</a></li><li><a href="#vectors-and-transformations">Vectors and transformations</a></li><li><a href="#2d-paths-and-polygons">2d paths and polygons</a></li><li><a href="#3d-paths,-coplanar-polygons,-and-meshes">3d paths, coplanar polygons, and meshes</a></li><li><a href="#utilities">Utilities</a></li></ul></li><li><a href="#examples">Examples</a><ul><li><a href="#paths-and-sweeps">Paths and Sweeps</a></li><li><a href="#rounded-extrusions">Rounded Extrusions</a></li><li><a href="#function-plotting">Function Plotting</a></li></ul></li><li><a href="#ppx">[@@deriving scad]</a></li></ul></nav><div class="odoc-content"><h2 id="notable-difference-from-the-openscad-language"><a href="#notable-difference-from-the-openscad-language" class="anchor"></a>Notable difference from the OpenSCAD language</h2><ul><li>Angles are represented in radians (and converted to degrees when compiling to OpenSCAD).</li><li>The dimensional system (2D or 3D) each shape inhabits is tracked by the type system. This is used to restrict the operations that can be legally applied (e.g. 2D shapes cannot be moved off of the xy plane, <a href="Scad_ml/Scad/index.html#val-linear_extrude"><code>linear_extrude</code></a> can only be applied to 2D shapes) and enforcing non-mixing of 2D and 3D shapes during boolean operations.</li><li>Additional modules providing sweeps, roundovers, and more, inspired largely by <a href="https://github.com/revarbat/BOSL2">BOSL2</a>, but also other OpenSCAD libraries such as <a href="https://github.com/JustinSDK/dotSCAD/tree/master/src">dotSCAD</a>, and <a href="https://github.com/rcolyer/plot-function">PlotFunction</a>.</li></ul><h2 id="usage"><a href="#usage" class="anchor"></a>Usage</h2><pre><code>open Scad_ml

let () =
  let scad_logo =
    let rad = 5.
    and fn = 720 in
    let cyl = Scad.cylinder ~fn ~center:true ~height:(rad *. 2.3) (rad /. 2.) in
    let cross_cyl = Scad.rotate (v3 0. (Float.pi /. 2.) 0.) cyl in
    Scad.union
      [ Scad.difference
          (Scad.sphere ~fn rad)
          [ cyl; cross_cyl; Scad.rotate (v3 0. 0. (Float.pi /. 2.)) cross_cyl ]
      ; Scad.color ~alpha:0.25 Color.Magenta cross_cyl
      ]
  in
  Scad.to_file &quot;scad_logo.scad&quot; scad_logo</code></pre> <img src="../assets/scad_logo.png" style="width:125mm;" /> <p>Generted <code>.scad</code> scripts can then be viewed with the <a href="https://openscad.org/downloads.html">OpenSCAD viewer</a> as you normally would, or directly exporting <a href="Scad_ml/Scad/index.html#type-t"><code>Scad.t</code></a> into other model formats or PNGs with <a href="Scad_ml/Scad/index.html#val-export"><code>Scad.export</code></a> and <a href="Scad_ml/Scad/index.html#val-snapshot"><code>Scad.snapshot</code></a> respectively.</p><h2 id="api"><a href="#api" class="anchor"></a>API</h2><p><a href="Scad_ml/index.html"><code>Scad_ml</code></a></p><h3 id="core-dsl"><a href="#core-dsl" class="anchor"></a>Core DSL</h3><ul><li><ul class="modules"><li><a href="Scad_ml/Scad/index.html"><code>Scad_ml.Scad</code></a> <span class="synopsis">Build scad models with well-typed dimensional system (3d / 2d) aware functions mapping down onto the similarly named operations made available by the OpenSCAD language.</span></li></ul></li><li><ul class="modules"><li><a href="Scad_ml/Text/index.html"><code>Scad_ml.Text</code></a> <span class="synopsis"><code>Scad</code>.text configuration parameter types</span></li></ul></li><li><ul class="modules"><li><a href="Scad_ml/Color/index.html"><code>Scad_ml.Color</code></a> <span class="synopsis"><code>Scad</code>.color specification type</span></li></ul></li></ul><h3 id="vectors-and-transformations"><a href="#vectors-and-transformations" class="anchor"></a>Vectors and transformations</h3><ul><li><ul class="modules"><li><a href="Scad_ml/Vec2/index.html"><code>Scad_ml.Vec2</code></a> <span class="synopsis">2-dimensional vector type, including basic mathematical/geometrical operations and transformations mirroring those found in <code>Scad</code>, allowing for points in 2d space, and higher level types composed of them (<i>e.g.</i> <code>Path2</code>.t and <code>Poly2</code>.t) to be manipulated in similar fashion to 2d OpenSCAD shapes (<code>Scad</code>.d2).</span></li></ul></li><li><ul class="modules"><li><a href="Scad_ml/Vec3/index.html"><code>Scad_ml.Vec3</code></a> <span class="synopsis">3-dimensional vector type, including basic mathematical/geometrical operations and transformations mirroring those found in <code>Scad</code>, allowing for points in 3d space, and higher level types composed of them (<i>e.g.</i> <code>Path3</code>.t, <code>Poly3</code>.t, and <code>Mesh</code>.t) to be manipulated in similar fashion to 3d OpenSCAD shapes (<code>Scad</code>.d3).</span></li></ul></li><li><ul class="modules"><li><a href="Scad_ml/RotMatrix/index.html"><code>Scad_ml.RotMatrix</code></a> <span class="synopsis">Rotation matrices providing an additional means of rotating 3d vectors (<code>Vec3</code>.t), and by way of <code>MultMatrix</code>.t, 3d OpenSCAD shapes (<code>Scad</code>.t).</span></li></ul></li><li><ul class="modules"><li><a href="Scad_ml/MultMatrix/index.html"><code>Scad_ml.MultMatrix</code></a> <span class="synopsis">Affine transformation matrices for transforming 3d vectors (<code>Vec3</code>.t), and 3d shapes (<code>Scad</code>.t) via OpenSCAD's own <a href="https://en.wikibooks.org/wiki/OpenSCAD_User_Manual/The_OpenSCAD_Language#multmatrix">multmatrix</a>, (see <code>Scad</code>.multmatrix).</span></li></ul></li><li><ul class="modules"><li><a href="Scad_ml/Quaternion/index.html"><code>Scad_ml.Quaternion</code></a> <span class="synopsis">Provides functions for the creation of and operations between <a href="https://en.wikipedia.org/wiki/Quaternion">quaternions</a>. These can be used to create composable and interpolatable rotations to be applied to 3d vectors (<code>Vec3</code>.t) directly, and <code>Scad</code>.t through <code>MultMatrix</code>.t.</span></li></ul></li><li><ul class="modules"><li><a href="Scad_ml/Plane/index.html"><code>Scad_ml.Plane</code></a> <span class="synopsis">Normalized cartesian plane operations facilitating conversion between 2d and 3d space.</span></li></ul></li></ul><h3 id="2d-paths-and-polygons"><a href="#2d-paths-and-polygons" class="anchor"></a>2d paths and polygons</h3><ul><li><ul class="modules"><li><a href="Scad_ml/Path2/index.html"><code>Scad_ml.Path2</code></a> <span class="synopsis">2d path generation (including arcs and basic shapes), manipulation (including offset and roundovers (see <code>Round</code>), and measurement.</span></li></ul></li><li><ul class="modules"><li><a href="Scad_ml/Bezier2/index.html"><code>Scad_ml.Bezier2</code></a> <span class="synopsis">Generation and measurement of 2d bezier curve (and patch/surface) functions. Including <code>of_path</code>, which produces a bezier spline function that passes through all points of the given path.</span></li></ul></li><li><ul class="modules"><li><a href="Scad_ml/CubicSpline/index.html"><code>Scad_ml.CubicSpline</code></a> <span class="synopsis">Cubic <a href="https://en.wikipedia.org/wiki/Spline_interpolation">spline interpolation</a> of 2d paths.</span></li></ul></li><li><ul class="modules"><li><a href="Scad_ml/Poly2/index.html"><code>Scad_ml.Poly2</code></a> <span class="synopsis">2d polygons (made up of an outer, and zero or more inner <code>Path2</code>.ts) that map into <code>Scad</code>.d2. Includes basic shape creation helpers, manipulations, (including offset and basic transformations), measurement, and validation.</span></li></ul></li><li><ul class="modules"><li><a href="Scad_ml/PolyText/index.html"><code>Scad_ml.PolyText</code></a> <span class="synopsis">Point path representations (using <code>Poly2</code>.t) of text via <a href="https://github.com/Chris00/ocaml-cairo">ocaml-cairo</a> import of system fonts. <b>NOTE:</b> Still somewhat experimental.</span></li></ul></li></ul><h3 id="3d-paths,-coplanar-polygons,-and-meshes"><a href="#3d-paths,-coplanar-polygons,-and-meshes" class="anchor"></a>3d paths, coplanar polygons, and meshes</h3><ul><li><ul class="modules"><li><a href="Scad_ml/Path3/index.html"><code>Scad_ml.Path3</code></a> <span class="synopsis">3d path generation (including arcs and basic shapes), manipulation (including roundovers (see <code>Round</code>), and conversion to sweeping transformations with <code>to_transforms</code>), and measurement.</span></li></ul></li><li><ul class="modules"><li><a href="Scad_ml/Bezier3/index.html"><code>Scad_ml.Bezier3</code></a> <span class="synopsis">Generation and measurement of 3d bezier curve (and patch/surface) functions. Including <code>of_path</code>, which produces a bezier spline function that passes through all points of the given path.</span></li></ul></li><li><ul class="modules"><li><a href="Scad_ml/Poly3/index.html"><code>Scad_ml.Poly3</code></a> <span class="synopsis">Planar 3d polygons (made up of an outer, and zero or more inner <code>Path3</code>.ts) that map into <code>Scad</code>.d2. Includes basic shape creation helpers, manipulations, (including offset and basic transformations), measurement, and validation.</span></li></ul></li><li><ul class="modules"><li><a href="Scad_ml/Mesh/index.html"><code>Scad_ml.Mesh</code></a> <span class="synopsis">Generation, and manipulation of 3-dimensional meshes (points and faces) that can be mapped into <code>Scad</code>.d3 as polyhedrons.</span></li></ul></li></ul><h3 id="utilities"><a href="#utilities" class="anchor"></a>Utilities</h3><ul><li><ul class="modules"><li><a href="Scad_ml/Math/index.html"><code>Scad_ml.Math</code></a> <span class="synopsis">Various operations on floats (<i>e.g.</i> approximate equality, linear interpolation), and basic arbitrary size 2d matrix operations.</span></li></ul></li><li><ul class="modules"><li><a href="Scad_ml/Export/index.html"><code>Scad_ml.Export</code></a> <span class="synopsis">Exporting <code>.scad</code> scripts through the OpenSCAD command line interface.</span></li></ul></li><li><ul class="modules"><li><a href="Scad_ml/BallTree2/index.html"><code>Scad_ml.BallTree2</code></a> <span class="synopsis">Construction of 2d vector space partitioning <a href="https://en.wikipedia.org/wiki/Ball_tree">ball tree</a> structures for <a href="https://en.wikipedia.org/wiki/Nearest_neighbor_search">nearest neighbour search</a>. Implementation adapted from the <a href="https://github.com/revarbat/BOSL2/blob/master/vectors.scad#L483">BOSL2 vectors module</a>.</span></li></ul></li><li><ul class="modules"><li><a href="Scad_ml/BallTree3/index.html"><code>Scad_ml.BallTree3</code></a> <span class="synopsis">Construction of 3d vector space partitioning <a href="https://en.wikipedia.org/wiki/Ball_tree">ball tree</a> structures for <a href="https://en.wikipedia.org/wiki/Nearest_neighbor_search">nearest neighbour search</a>. Implementation adapted from the <a href="https://github.com/revarbat/BOSL2/blob/master/vectors.scad#L483">BOSL2 vectors module</a>.</span></li></ul></li></ul><h2 id="examples"><a href="#examples" class="anchor"></a>Examples</h2><h3 id="paths-and-sweeps"><a href="#paths-and-sweeps" class="anchor"></a>Paths and Sweeps</h3><ul><li><a href="spline.html"><b>Cubic spline</b></a></li><li><a href="arc_points.html"><b>Arcing paths</b></a></li><li><a href="helices.html"><b>Helical paths and extrusions</b></a></li><li><a href="resampled_path.html"><b>Path resampling and scaling/twisting sweeps</b></a></li><li><a href="spiral.html"><b>Flat spiral with bespoke sweep transforms</b></a></li><li><a href="wave_cylinder.html"><b>Wavey hollow cylinder with bespoke sweep transforms</b></a></li></ul><h3 id="rounded-extrusions"><a href="#rounded-extrusions" class="anchor"></a>Rounded Extrusions</h3><ul><li><a href="rounded_polyhole_sweep.html"><b>Rounded sweep along bezier spline with holes</b></a></li><li><a href="rounded_prism_tunnel.html"><b>Slanted prism with hole</b></a></li></ul><h3 id="function-plotting"><a href="#function-plotting" class="anchor"></a>Function Plotting</h3><ul><li><a href="polar_rose.html"><b>Rose polar plot</b></a></li><li><a href="cartesian_gravity_well.html"><b>Cartesian gravity well</b></a></li><li><a href="axial_chalice.html"><b>Axial chalice</b></a></li></ul><h2 id="ppx"><a href="#ppx" class="anchor"></a>[@@deriving scad]</h2><p>There is a companion ppx, <a href="https://github.com/geoffder/ppx_deriving_scad">[@@deriving scad]</a> for generating transformation functions for user-defined records and abstract types made up of the <a href="Scad_ml/Scad/index.html#type-t"><code>Scad.t</code></a>, along with their corresponding vector (<a href="Scad_ml/Vec2/index.html#type-t"><code>Vec2.t</code></a> or <a href="Scad_ml/Vec3/index.html#type-t"><code>Vec3.t</code></a>) types (and those composed of them) provided in this library.</p></div></body></html>