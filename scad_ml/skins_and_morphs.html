<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>skins_and_morphs (scad_ml.skins_and_morphs)</title><link rel="stylesheet" href="../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="index.html">Up</a> â€“ <a href="index.html">scad_ml</a> &#x00BB; skins_and_morphs</nav><header class="odoc-preamble"><h1 id="skins-and-morphs"><a href="#skins-and-morphs" class="anchor"></a>Skins and Morphs</h1><pre><code>open Scad_ml

let () =
  let sq = Path3.square ~center:true (v2 2. 2.)
  and circ =
    Path3.circle ~fn:36 0.6
    |&gt; Path3.rotate (v3 0. (Float.pi /. 4.) 0.)
    |&gt; Path3.translate (v3 0. 0. 1.)
  and ellipse =
    Path3.ellipse ~fn:21 (v2 0.5 1.5)
    |&gt; Path3.rotate (v3 0. (Float.pi /. 1.5) 0.)
    |&gt; Path3.translate (v3 3. 0. 1.)
  and rect =
    Path3.square ~center:true (v2 0.2 1.) |&gt; Path3.translate (v3 4. 0. 0.) |&gt; List.rev
  and circ2 =
    Path3.circle ~fn:50 1.
    |&gt; Path3.rotate (v3 0. (Float.pi /. 2.) 0.)
    |&gt; Path3.translate (v3 2. 1. (-2.))
    |&gt; List.rev
  and ellipse2 =
    Path3.ellipse ~fn:60 (v2 0.25 0.5)
    |&gt; Path3.rotate (v3 0. (Float.pi /. 1.5) 0.)
    |&gt; Path3.translate (v3 1. 0. (-2.))
    |&gt; List.rev
  and sq2 =
    Path3.square ~center:true (v2 1. 1.)
    |&gt; Path3.rotate (v3 0. 0. (Float.pi /. 4.))
    |&gt; Path3.translate (v3 0. 0. (-1.))
  in
  ignore [ sq; circ; ellipse; rect; circ2; ellipse2; sq2 ];
  Mesh.skin
    ~refine:2
    ~endcaps:`Loop (* ~endcaps:`Bot *)
    ~slices:(`Flat 35)
    ~mapping:
      (`Mix
        [ `Reindex `ByLen
        ; `Reindex `ByLen
        ; `Reindex `ByLen
        ; `Reindex `ByLen
        ; `Reindex `ByLen
        ; `Reindex `BySeg
        ; `Distance
        ; `Direct `BySeg
        ] )
    [ sq
    ; circ
    ; ellipse
    ; rect
    ; circ2
    ; ellipse2
    ; sq2
    ; Path3.translate (v3 0. 0. (-0.5)) sq
    ]
  |&gt; Mesh.to_scad
  |&gt; fun s -&gt; Scad.union [ s; Scad.sphere 1. ] |&gt; Scad.to_file &quot;skin_test.scad&quot;

(* let () = *)
(*   let rounded = *)
(*     Path3.( *)
(*       roundover ~fn:32 *)
(*       @@ Round.flat *)
(*            ~closed:true *)
(*            ~corner:(Round.circ (`Radius 15.)) *)
(*            (v3 (-25.) 25. 0. :: Path3.square (v2 50. 50.))) *)
(*     |&gt; Path3.subdivide ~closed:true ~freq:(`Refine (4, `ByLen)) *)
(*   and sq = *)
(*     v3 4. 0. 0. :: Path3.square ~center:true (v2 10. 10.) *)
(*     |&gt; Path3.translate (v3 30. 30. 10.) *)
(*   in *)
(*   Mesh.skin ~refine:2 ~slices:(`Flat 25) ~spec:(`Flat `Tangent) [ rounded; sq ] *)
(*   |&gt; Mesh.to_scad *)
(*   |&gt; Scad.to_file &quot;tangent_skin_test.scad&quot; *)

let () =
  Mesh.skin
    ~refine:2
    ~slices:(`Flat 25)
    ~mapping:(`Flat `Tangent)
    Path3.[ circle ~fn:5 4.; translate (v3 0. 0. 3.) @@ circle ~fn:80 2. ]
  |&gt; Mesh.to_scad
  |&gt; Scad.to_file &quot;tangent_skin_test.scad&quot;

(* let () = *)
(*   Scad.union *)
(*     [ Scad.circle ~fn:5 1. |&gt; Scad.linear_extrude ~height:1. *)
(*     ; Poly2.circle ~fn:5 1. *)
(*       |&gt; Mesh.linear_extrude ~height:1. *)
(*       |&gt; Mesh.translate (v3 0. 0. 1.5) *)
(*       |&gt; Mesh.to_scad *)
(*     ] *)
(*   |&gt; Scad.to_file &quot;circ_test.scad&quot; *)

let () =
  let path =
    let control = Vec3.[ v 0. 0. 2.; v 0. 20. 20.; v 40. 20. 10.; v 30. 0. 10. ] in
    Bezier3.curve ~fn:60 @@ Bezier3.of_path ~size:(`FlatRel 0.3) control
  and caps =
    Mesh.Cap.(
      capped
        ~bot:(round ~holes:`Same @@ chamf ~height:(-1.2) ~angle:(Float.pi /. 8.) ())
        ~top:(round @@ circ (`Radius 0.5)))
  and a = Poly2.ring ~fn:5 ~thickness:(v2 2.5 2.5) (v2 6. 6.)
  and b = Poly2.ring ~fn:80 ~thickness:(v2 2. 2.) (v2 4. 4.) in
  Mesh.path_morph ~caps ~path ~outer_map:`Tangent a b
  |&gt; Mesh.to_scad
  |&gt; fun s -&gt; Scad.union [ s; Scad.sphere 2.5 ] |&gt; Scad.to_file &quot;tangent_morph_test.scad&quot;

let () =
  Mesh.linear_morph
    ~refine:2
    ~ez:(v2 0.42 0., v2 1. 1.)
    ~slices:60
    ~outer_map:`Tangent
    ~height:3.
    (Poly2.circle ~fn:5 4.)
    (Poly2.circle ~fn:80 0.5)
  |&gt; Mesh.to_scad
  |&gt; Scad.to_file &quot;eased_morph.scad&quot;</code></pre></header><div class="odoc-content"></div></body></html>