<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Poly3 (scad_ml.Scad_ml.Poly3)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">scad_ml</a> &#x00BB; <a href="../index.html">Scad_ml</a> &#x00BB; Poly3</nav><header class="odoc-preamble"><h1>Module <code><span>Scad_ml.Poly3</span></code></h1><p>Planar 3d polygons (made up of an outer, and zero or more inner <a href="../Path3/index.html#type-t"><code>Path3.t</code></a>s) that map into <a href="../Scad/index.html#type-d2"><code>Scad.d2</code></a>. Includes basic shape creation helpers, manipulations, (including offset and basic transformations), measurement, and validation.</p></header><nav class="odoc-toc"><ul><li><a href="#creation-and-2d-3d-conversion">Creation and 2d-3d conversion</a></li><li><a href="#basic-shapes">Basic Shapes</a></li><li><a href="#geometry">Geometry</a></li><li><a href="#offset-and-basic-transformations">Offset and Basic Transformations</a></li><li><a href="#output">Output</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <span class="keyword">private</span> </span><span>{</span></code><table><tr id="type-t.outer" class="anchored"><td class="def record field"><a href="#type-t.outer" class="anchor"></a><code><span>outer : <a href="../Path3/index.html#type-t">Path3.t</a>;</span></code></td></tr><tr id="type-t.holes" class="anchored"><td class="def record field"><a href="#type-t.holes" class="anchor"></a><code><span>holes : <span><a href="../Path3/index.html#type-t">Path3.t</a> list</span>;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>3-dimensional (planar) polygon</p><p>This type is kept private to force use of <a href="#val-make"><code>make</code></a>, which ensures that all points of the polygon are planar and performs <a href="../Poly2/index.html#val-validation"><code>Poly2.validation</code></a> by default, hopefully providing an early warning that the shape may have issues rendering in OpenSCAD.</p></div></div><h2 id="creation-and-2d-3d-conversion"><a href="#creation-and-2d-3d-conversion" class="anchor"></a>Creation and 2d-3d conversion</h2><div class="odoc-spec"><div class="spec value" id="val-make" class="anchored"><a href="#val-make" class="anchor"></a><code><span><span class="keyword">val</span> make : <span>?validate:bool <span class="arrow">&#45;&gt;</span></span> <span>?holes:<span><a href="../Path3/index.html#type-t">Path3.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Path3/index.html#type-t">Path3.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>make ?validate ?holes outer</code></p><p>Create a 3d polygon from an <code>outer</code> path (perimeter), and zero or more <code>holes</code> (default = <code>[]</code>). If validate is <code>true</code> (as it is by default), all paths are checked for coplanarity, then <a href="../Poly2/index.html#val-validation"><code>Poly2.validation</code></a> is performed on a 2d projection, raising exceptions if the defined polygon is not simple (and thus, may cause problems in CGAL).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-add_holes" class="anchored"><a href="#val-add_holes" class="anchor"></a><code><span><span class="keyword">val</span> add_holes : <span>?validate:bool <span class="arrow">&#45;&gt;</span></span> <span>holes:<span><span><a href="../Vec3/index.html#type-t">Vec3.t</a> list</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>add_holes ?validate ~holes t</code></p><p>Add <code>holes</code> to <code>t</code>. If validate is <code>true</code> (as it is by default), <a href="../Poly2/index.html#val-validation"><code>Poly2.validation</code></a> is performed, raising exceptions if the defined polygon is not simple (and thus, may cause problems in CGAL).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-of_poly2" class="anchored"><a href="#val-of_poly2" class="anchor"></a><code><span><span class="keyword">val</span> of_poly2 : <span>?plane:<a href="../Plane/index.html#type-t">Plane.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Poly2/index.html#type-t">Poly2.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>of_poly2 ?plane poly</code></p><p>Lift the 2d polygon <code>poly</code> onto <code>plane</code> (default = <a href="../Plane/index.html#val-xy"><code>Plane.xy</code></a>).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_poly2" class="anchored"><a href="#val-to_poly2" class="anchor"></a><code><span><span class="keyword">val</span> to_poly2 : <span>?validate:bool <span class="arrow">&#45;&gt;</span></span> <span>?plane:<a href="../Plane/index.html#type-t">Plane.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Poly2/index.html#type-t">Poly2.t</a></span></code></div><div class="spec-doc"><p><code>to_poly2 ?validate ?plane t</code></p><p>Project the 3d polygon <code>t</code> onto <code>plane</code> (default = <a href="../Plane/index.html#val-xy"><code>Plane.xy</code></a>). If <code>validate</code> is <code>true</code>, 2d polygon <a href="../Poly2/index.html#val-validation"><code>Poly2.validation</code></a> is performed (default = <code>true</code>).</p></div></div><h2 id="basic-shapes"><a href="#basic-shapes" class="anchor"></a>Basic Shapes</h2><div class="odoc-spec"><div class="spec value" id="val-circle" class="anchored"><a href="#val-circle" class="anchor"></a><code><span><span class="keyword">val</span> circle : <span>?fn:int <span class="arrow">&#45;&gt;</span></span> <span>?plane:<a href="../Plane/index.html#type-t">Plane.t</a> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>circle ?fn ?plane r</code></p><p>Create a circle of radius <code>r</code> with <code>fn</code> points (default = <code>30</code>), on the optionally provided <code>plane</code> (default = <a href="../Plane/index.html#val-xy"><code>Plane.xy</code></a>).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-wedge" class="anchored"><a href="#val-wedge" class="anchor"></a><code><span><span class="keyword">val</span> wedge : 
  <span>?fn:int <span class="arrow">&#45;&gt;</span></span>
  <span>?plane:<a href="../Plane/index.html#type-t">Plane.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>centre:<a href="../Vec3/index.html#type-t">Vec3.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>radius:float <span class="arrow">&#45;&gt;</span></span>
  <span>start:float <span class="arrow">&#45;&gt;</span></span>
  <span>float <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>wedge ?fn ?plane ~centre ~radius ~start a</code></p><p>Create an arcing path (as in <a href="../Path3/index.html#val-arc"><code>Path3.arc</code></a>), with the <code>centre</code> point included to close the path, forming a wedge. The polygon is drawn on the provided <code>plane</code> (default = <a href="../Plane/index.html#val-xy"><code>Plane.xy</code></a>).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-square" class="anchored"><a href="#val-square" class="anchor"></a><code><span><span class="keyword">val</span> square : <span>?center:bool <span class="arrow">&#45;&gt;</span></span> <span>?plane:<a href="../Plane/index.html#type-t">Plane.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Vec2/index.html#type-t">Vec2.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>square ?center ?plane dims</code></p><p>Create a rectangular polygon with xy <code>dims</code> (e.g. width and height). If <code>center</code> is <code>true</code> then the path will be centred around the origin (default = <code>false</code>). The polygon is drawn on the provided <code>plane</code> (default = <a href="../Plane/index.html#val-xy"><code>Plane.xy</code></a>).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-ring" class="anchored"><a href="#val-ring" class="anchor"></a><code><span><span class="keyword">val</span> ring : <span>?fn:int <span class="arrow">&#45;&gt;</span></span> <span>?plane:<a href="../Plane/index.html#type-t">Plane.t</a> <span class="arrow">&#45;&gt;</span></span> <span>thickness:float <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>ring ?fn ?plane ~thickness r</code></p><p>Create a circular empty ring of outer radius <code>r</code>, with the given radial <code>thickness</code> (difference between outer and inner radii). Outer and inner paths are drawn with <code>fn</code> points (default = <code>30</code>). The polygon is drawn on the provided <code>plane</code> (default = <a href="../Plane/index.html#val-xy"><code>Plane.xy</code></a>).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-box" class="anchored"><a href="#val-box" class="anchor"></a><code><span><span class="keyword">val</span> box : <span>?center:bool <span class="arrow">&#45;&gt;</span></span> <span>?plane:<a href="../Plane/index.html#type-t">Plane.t</a> <span class="arrow">&#45;&gt;</span></span> <span>thickness:<a href="../Vec2/index.html#type-t">Vec2.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Vec2/index.html#type-t">Vec2.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>box ?center ?plane ~thickness dims</code></p><p>Create a rectangular empty box of outer xy dimensions <code>dims</code>, with the given xy <code>thickness</code> (difference between outer and inner xy dimensions). If <code>center</code> is <code>true</code>, then the path will be centred around the origin (default = <code>false</code>). The polygon is drawn on the provided <code>plane</code> (default = <a href="../Plane/index.html#val-xy"><code>Plane.xy</code></a>).</p></div></div><h2 id="geometry"><a href="#geometry" class="anchor"></a>Geometry</h2><div class="odoc-spec"><div class="spec value" id="val-bbox" class="anchored"><a href="#val-bbox" class="anchor"></a><code><span><span class="keyword">val</span> bbox : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Vec3/index.html#type-bbox">Vec3.bbox</a></span></code></div><div class="spec-doc"><p><code>bbox t</code></p><p>Compute the 3d bounding box of the polygon <code>t</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-centroid" class="anchored"><a href="#val-centroid" class="anchor"></a><code><span><span class="keyword">val</span> centroid : <span>?eps:float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Vec3/index.html#type-t">Vec3.t</a></span></code></div><div class="spec-doc"><p><code>centroid ?eps t</code></p><p>Compute the centroid of the outer path of the polygon <code>t</code>. If <code>t.outer</code> is collinear or self-intersecting (within <code>eps</code> tolerance), an <code>Invalid_argument</code> exception is raised.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-area" class="anchored"><a href="#val-area" class="anchor"></a><code><span><span class="keyword">val</span> area : <span>?signed:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p><code>area ?signed t</code></p><p>Compute the total area of the polygon <code>t</code>. If <code>signed</code> is <code>true</code>, then the signed areas of the <code>outer</code> and <code>holes</code> paths of <code>t</code> will be summed (keep in mind that this is dependent on winding direction, which should generally be opposite between outer and inner paths), otherwise the unsigned (positive) area of the <code>holes</code> will be subtracted (default = <code>false</code>).</p></div></div><h2 id="offset-and-basic-transformations"><a href="#offset-and-basic-transformations" class="anchor"></a>Offset and Basic Transformations</h2><div class="odoc-spec"><div class="spec value" id="val-offset" class="anchored"><a href="#val-offset" class="anchor"></a><code><span><span class="keyword">val</span> offset : 
  <span>?fn:int <span class="arrow">&#45;&gt;</span></span>
  <span>?fs:float <span class="arrow">&#45;&gt;</span></span>
  <span>?fa:float <span class="arrow">&#45;&gt;</span></span>
  <span>?check_valid:<span>[ `No <span><span>| `Quality</span> of int</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>[&lt; <span>`Chamfer of float</span> <span><span>| `Delta</span> of float</span> <span><span>| `Radius</span> of float</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>offset ?fn ?fs ?fa ?check_valid spec t</code></p><p>Offset outer and inner paths of <code>t</code> by the <code>spec</code>ified amount.</p><ul><li><code>`Delta d</code> will create a new outline whose sides are a fixed distance <code>d</code> (+ve out, -ve in) from the original outline.</li><li><code>`Chamfer d</code> fixed distance offset by <code>d</code> as with delta, but with corners chamfered.</li><li><code>`Radius r</code> creates a new outline as if a circle of some radius <code>r</code> is rotated around the exterior (<code>r &gt; 0</code>) or interior (<code>r &lt; 0</code>) original outline. <code>fn</code>, <code>fs</code>, and <code>fa</code> parameters govern the number of points that will be used for these arcs (they are ignored for delta and chamfer modes).</li><li>The <code>check_valid</code> default of <code>`Quality 1</code> will check the validity of shifted line segments by checking whether their ends and <code>n</code> additional points spaced throughout are far enough from the original path. If there are no points that have been offset by the target <code>d</code>, a <code>Failure</code> exception will be raised. Checking can be turned off by setting this to <code>`No</code>.</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-map" class="anchored"><a href="#val-map" class="anchor"></a><code><span><span class="keyword">val</span> map : <span><span>( <span><a href="../Path3/index.html#type-t">Path3.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Path3/index.html#type-t">Path3.t</a> )</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>map f t</code></p><p>Map the outer and inner paths of <code>t</code> with the function <code>f</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-translate" class="anchored"><a href="#val-translate" class="anchor"></a><code><span><span class="keyword">val</span> translate : <span><a href="../Vec3/index.html#type-t">Vec3.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-rotate" class="anchored"><a href="#val-rotate" class="anchor"></a><code><span><span class="keyword">val</span> rotate : <span><a href="../Vec3/index.html#type-t">Vec3.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-rotate_about_pt" class="anchored"><a href="#val-rotate_about_pt" class="anchor"></a><code><span><span class="keyword">val</span> rotate_about_pt : <span><a href="../Vec3/index.html#type-t">Vec3.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Vec3/index.html#type-t">Vec3.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-multmatrix" class="anchored"><a href="#val-multmatrix" class="anchor"></a><code><span><span class="keyword">val</span> multmatrix : <span><a href="../MultMatrix/index.html#type-t">MultMatrix.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-quaternion" class="anchored"><a href="#val-quaternion" class="anchor"></a><code><span><span class="keyword">val</span> quaternion : <span><a href="../Quaternion/index.html#type-t">Quaternion.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-quaternion_about_pt" class="anchored"><a href="#val-quaternion_about_pt" class="anchor"></a><code><span><span class="keyword">val</span> quaternion_about_pt : <span><a href="../Quaternion/index.html#type-t">Quaternion.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Vec3/index.html#type-t">Vec3.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-vector_rotate" class="anchored"><a href="#val-vector_rotate" class="anchor"></a><code><span><span class="keyword">val</span> vector_rotate : <span><a href="../Vec3/index.html#type-t">Vec3.t</a> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-vector_rotate_about_pt" class="anchored"><a href="#val-vector_rotate_about_pt" class="anchor"></a><code><span><span class="keyword">val</span> vector_rotate_about_pt : <span><a href="../Vec3/index.html#type-t">Vec3.t</a> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span><a href="../Vec3/index.html#type-t">Vec3.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-scale" class="anchored"><a href="#val-scale" class="anchor"></a><code><span><span class="keyword">val</span> scale : <span><a href="../Vec3/index.html#type-t">Vec3.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-mirror" class="anchored"><a href="#val-mirror" class="anchor"></a><code><span><span class="keyword">val</span> mirror : <span><a href="../Vec3/index.html#type-t">Vec3.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><h2 id="output"><a href="#output" class="anchor"></a>Output</h2><p>Mapping from <a href="#type-t"><code>t</code></a> into a <a href="../Scad/index.html#type-d3"><code>Scad.d3</code></a> can be done via <a href="../Mesh/index.html#val-to_scad"><code>Mesh.to_scad</code></a>, by way of <a href="../Mesh/index.html#val-of_poly3"><code>Mesh.of_poly3</code></a>.</p></div></body></html>