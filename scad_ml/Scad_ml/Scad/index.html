<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Scad (scad_ml.Scad_ml.Scad)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">scad_ml</a> &#x00BB; <a href="../index.html">Scad_ml</a> &#x00BB; Scad</nav><header class="odoc-preamble"><h1>Module <code><span>Scad_ml.Scad</span></code></h1><p>Build scad models with well-typed dimensional system (3d / 2d) aware functions mapping down onto the similarly named operations made available by the OpenSCAD language.</p><p>OpenSCAD objects and the operations upon them are represented by the recursive type <a href="#type-t"><code>t</code></a>, which can then finally be translated into a scad script. As this transpiles down to OpenSCAD, the <a href="https://en.wikibooks.org/wiki/OpenSCAD_User_Manual/The_OpenSCAD_Language">User Manual</a> can be referred to for additional information about most of the functions (and examples of output) made available here.</p></header><nav class="odoc-toc"><ul><li><a href="#a-note-on-special-facet-parameters">A note on special facet parameters</a></li><li><a href="#3d-shape-primitives">3d shape primitives</a></li><li><a href="#2d-shape-primitives">2d shape primitives</a></li><li><a href="#basic-transformations">Basic Transformations</a></li><li><a href="#3d-only-transformations">3d Only Transformations</a></li><li><a href="#2d-only-transformations">2d Only Transformations</a></li><li><a href="#boolean-combination">Boolean Combination</a></li><li><a href="#3d-to-2d">3d to 2d</a></li><li><a href="#2d-to-3d-extrusions">2d to 3d extrusions</a></li><li><a href="#external-(non-scad)-format-import">External (non-SCAD) Format Import</a></li><li><a href="#output">Output</a></li><li><a href="#infix-operators">Infix Operators</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-scad" class="anchored"><a href="#type-scad" class="anchor"></a><code><span><span class="keyword">type</span> scad</span></code></div><div class="spec-doc"><p>The scad type is kept abstract, as the available constructor functions provide much less cumbersome means of building up models.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>('space, 'rot) t</span></span></code></div><div class="spec-doc"><p>This GADT allows scads to be tagged as 2D or 3D, restricting usage of functions that should only apply to one or the other, and preventing mixing during boolean operations.</p><ul><li>The <code>'space</code> parameter can be <a href="../Vec2/index.html#type-t"><code>Vec2.t</code></a> or <a href="../Vec3/index.html#type-t"><code>Vec3.t</code></a>, corresponding to dimensions over which the scad can be transformed.</li><li>The <code>'rot</code> parameter corresponds to the axes rotation available to the scad. For 2d shapes, this is a <code>float</code> representing z-axis rotation, and for 3d shapes, xyz axes are available through <a href="../Vec3/index.html#type-t"><code>Vec3.t</code></a>.</li></ul></div></div><div class="odoc-spec"><div class="spec type" id="type-d2" class="anchored"><a href="#type-d2" class="anchor"></a><code><span><span class="keyword">type</span> d2</span><span> = <span><span>( <a href="../Vec2/index.html#type-t">Vec2.t</a>, float )</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Two-dimensional shape</p></div></div><div class="odoc-spec"><div class="spec type" id="type-d3" class="anchored"><a href="#type-d3" class="anchor"></a><code><span><span class="keyword">type</span> d3</span><span> = <span><span>( <a href="../Vec3/index.html#type-t">Vec3.t</a>, <a href="../Vec3/index.html#type-t">Vec3.t</a> )</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Three-dimensional shape</p></div></div><h2 id="a-note-on-special-facet-parameters"><a href="#a-note-on-special-facet-parameters" class="anchor"></a>A note on special facet parameters</h2><p>The optional parameters ?fa, ?fs, and ?fn correspond to the OpenSCAD &quot;special parameters&quot; governing the number of facets used to generate arcs (<b>$fa</b>, <b>$fs</b>, and <b>$fn</b> respectively). Where present, they govern the following:</p><ul><li><code>?fa</code> is the minimum angle for a fragment. Note that this should be given in radians here (as opposed to degrees in the OpenSCAD language).</li><li><code>?fs</code> is the minimum size/length of a fragment. Even if ?fa is given, and very small, this parameter will limit how small the generated fragments can be.</li><li><code>?fn</code> will set the absolute number of fragments to be used (causing the previous two parameters to be ignored.</li></ul><h2 id="3d-shape-primitives"><a href="#3d-shape-primitives" class="anchor"></a>3d shape primitives</h2><div class="odoc-spec"><div class="spec value" id="val-cube" class="anchored"><a href="#val-cube" class="anchor"></a><code><span><span class="keyword">val</span> cube : <span>?center:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="../Vec3/index.html#type-t">Vec3.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-d3">d3</a></span></code></div><div class="spec-doc"><p><code>cube ?center dimensions</code></p><p>Creates a cube in the first octant, with the given xyz <code>dimensions</code>. When <code>center</code> is true, the cube is centered on the origin.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sphere" class="anchored"><a href="#val-sphere" class="anchor"></a><code><span><span class="keyword">val</span> sphere : <span>?fa:float <span class="arrow">&#45;&gt;</span></span> <span>?fs:float <span class="arrow">&#45;&gt;</span></span> <span>?fn:int <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <a href="#type-d3">d3</a></span></code></div><div class="spec-doc"><p><code>sphere ?fa ?fs ?fn radius</code></p><p>Creates a sphere with given <code>radius</code> at the origin of the coordinate system.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-cylinder" class="anchored"><a href="#val-cylinder" class="anchor"></a><code><span><span class="keyword">val</span> cylinder : 
  <span>?center:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?fa:float <span class="arrow">&#45;&gt;</span></span>
  <span>?fs:float <span class="arrow">&#45;&gt;</span></span>
  <span>?fn:int <span class="arrow">&#45;&gt;</span></span>
  <span>height:float <span class="arrow">&#45;&gt;</span></span>
  <span>float <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-d3">d3</a></span></code></div><div class="spec-doc"><p><code>cylinder ?center ?fa ?fs ?fn ~height radius</code></p><p>Creates a cylinder centered about the z axis. When center is true, it will also be centered vertically, otherwise the base will sit upon the XY plane.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-cone" class="anchored"><a href="#val-cone" class="anchor"></a><code><span><span class="keyword">val</span> cone : 
  <span>?center:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?fa:float <span class="arrow">&#45;&gt;</span></span>
  <span>?fs:float <span class="arrow">&#45;&gt;</span></span>
  <span>?fn:int <span class="arrow">&#45;&gt;</span></span>
  <span>height:float <span class="arrow">&#45;&gt;</span></span>
  <span>float <span class="arrow">&#45;&gt;</span></span>
  <span>float <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-d3">d3</a></span></code></div><div class="spec-doc"><p><code>cone ?center ?fa ?fs ?fn ~height r1 r2 </code></p><p>Creates a cone (using the cylinder primitive) with bottom radius <code>r1</code> and top radius <code>r2</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-polyhedron" class="anchored"><a href="#val-polyhedron" class="anchor"></a><code><span><span class="keyword">val</span> polyhedron : <span>?convexity:int <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../Vec3/index.html#type-t">Vec3.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>int list</span> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-d3">d3</a></span></code></div><div class="spec-doc"><p><code>polyhedron points faces</code></p><p>A polyhedron is the most general 3D primitive solid. It can be used to create any regular or irregular shape including those with concave as well as convex features. Curved surfaces are approximated by a series of flat</p><p>The <a href="../Vec3/index.html#type-t"><code>Vec3.t</code></a> list of coordinate <code>points</code> represents the vertices of the shape. How these points define the surface of the generated shape is specified by the <code>faces</code> (0-based) index lists. Each element of <code>faces</code> should define a face in the same order (from the perspective of viewing the drawn shape from the outside, OpenSCAD prefers clockwise ordering) face using the points at the indices in <code>points</code>. These may be defined in any order, as long as enough are provided to fully enclose the shape.</p><p>The optional <code>?convexity</code> parameter specifies the maximum number of faces a ray intersecting the object might penetrate. This parameter is needed only for correct display of the object in OpenCSG preview mode. It has no effect on the polyhedron rendering. For display problems, setting it to 10 should work fine for most cases.</p><p>If you are having trouble, please see the <a href="https://en.wikibooks.org/wiki/OpenSCAD_User_Manual/The_OpenSCAD_Language#Debugging_polyhedra">debugging polyhedra</a> section of the OpenSCAD user manual.</p></div></div><h2 id="2d-shape-primitives"><a href="#2d-shape-primitives" class="anchor"></a>2d shape primitives</h2><div class="odoc-spec"><div class="spec value" id="val-square" class="anchored"><a href="#val-square" class="anchor"></a><code><span><span class="keyword">val</span> square : <span>?center:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="../Vec2/index.html#type-t">Vec2.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-d2">d2</a></span></code></div><div class="spec-doc"><p><code>square ?center dimensions</code></p><p>Creates a square or rectangle in the first quadrant, with given xyz <code>dimensions</code>. When <code>?center</code> is true the square is centered on the origin.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-circle" class="anchored"><a href="#val-circle" class="anchor"></a><code><span><span class="keyword">val</span> circle : <span>?fa:float <span class="arrow">&#45;&gt;</span></span> <span>?fs:float <span class="arrow">&#45;&gt;</span></span> <span>?fn:int <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <a href="#type-d2">d2</a></span></code></div><div class="spec-doc"><p><code>circle ?fa ?fs ?fn radius</code></p><p>Creates a circle with given <code>radius</code> at the origin.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-polygon" class="anchored"><a href="#val-polygon" class="anchor"></a><code><span><span class="keyword">val</span> polygon : <span>?convexity:int <span class="arrow">&#45;&gt;</span></span> <span>?paths:<span><span>int list</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../Vec2/index.html#type-t">Vec2.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-d2">d2</a></span></code></div><div class="spec-doc"><p><code>polygon ?convexity ?paths points</code></p><p>Creates a multiple sided shape from a list of xy <code>points</code>. If <code>?paths</code> is not specified, then all points will be used in the order that they appear. A single path list specifies the order to traverse the <code>points</code> to draw the outline of the polygon. Any additional lists of indices will describe secondary shapes to be subtracted from the first. In this way, holes can be placed in the shape without a subsequent boolean <a href="#val-difference"><code>difference</code></a> operation.</p><p>For information on the <code>?convexity</code>, please see the documentation for <a href="#val-polyhedron"><code>polyhedron</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-text" class="anchored"><a href="#val-text" class="anchor"></a><code><span><span class="keyword">val</span> text : 
  <span>?size:float <span class="arrow">&#45;&gt;</span></span>
  <span>?font:string <span class="arrow">&#45;&gt;</span></span>
  <span>?halign:<a href="../Text/index.html#type-h_align">Text.h_align</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?valign:<a href="../Text/index.html#type-v_align">Text.v_align</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?spacing:float <span class="arrow">&#45;&gt;</span></span>
  <span>?direction:<a href="../Text/index.html#type-direction">Text.direction</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?language:string <span class="arrow">&#45;&gt;</span></span>
  <span>?script:string <span class="arrow">&#45;&gt;</span></span>
  <span>?fn:int <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-d2">d2</a></span></code></div><div class="spec-doc"><p><code>text ?size ?font ?halign ?valign ?spacing ?direction ?language ?script ?fn str</code></p><p>Creates 2D geometric text object with contents <code>str</code>, using a named font installed on the local system or provided as a separate font file.</p><ul><li><code>?size</code> specifies the ascent (height above baseline). Default is 10.</li><li><code>?font</code> is the name of the font that should be used. This is not the name of the font file, but the logical font name (internally handled by the fontconfig library).</li><li><code>?halign</code> and <code>?valign</code> set the horizontal and vertical alignments of the text. Defaults are <code>Left</code> and <code>Baseline</code> respectively.</li><li><code>?spacing</code> gives a factor by which to increase/decrease the character spacing. A value of 1.0 would result in normal spacing.</li><li><code>?direction</code> sets the text flow. Default is <code>LeftToRight</code>.</li><li><code>?language</code> sets the language of the text. Default is &quot;en&quot;.</li><li><code>?script</code> sets the script of the text. Default is &quot;latin&quot;.</li></ul></div></div><h2 id="basic-transformations"><a href="#basic-transformations" class="anchor"></a>Basic Transformations</h2><p>These functions can be applied to both 2d and 3d shapes. Relevant vector and rotational parameters are tied to the dimensionality of the input shape, preventing transformations that could result in 2d shapes escaping the xy plane. <i>e.g.</i> Translation vectors of 2d shapes are given as <a href="../Vec2/index.html#type-t"><code>Vec2.t</code></a>, and rotation is given as a single <code>float</code> angle about the z-axis.</p><div class="odoc-spec"><div class="spec value" id="val-translate" class="anchored"><a href="#val-translate" class="anchor"></a><code><span><span class="keyword">val</span> translate : <span><span class="type-var">'s</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>translate p t</code></p><p>Moves <code>t</code> along the vector <code>p</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-rotate" class="anchored"><a href="#val-rotate" class="anchor"></a><code><span><span class="keyword">val</span> rotate : <span><span class="type-var">'r</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>rotate r t</code></p><p>Performs an Euler rotation (x -&gt; y -&gt; z) if operating in 3d (<code>(r : Vec3.t) (t : d3)</code>), otherwise (<code>(r : float) (t : d2)</code>), a single rotation around the z-axis is performed. Angle(s) <code>r</code> are in radians.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-rotate_about_pt" class="anchored"><a href="#val-rotate_about_pt" class="anchor"></a><code><span><span class="keyword">val</span> rotate_about_pt : <span><span class="type-var">'r</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'s</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>rotate_about_pt r p t</code></p><p>Translates <code>t</code> along the vector <code>p</code>, rotating the resulting shape by <code>r</code> (euler x -&gt; y -&gt; z for 3d, z only in 2d), and finally, moving back along the vector <code>p</code>. Functionally, rotating about the point in space arrived at by the initial translation along the vector <code>p</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mirror" class="anchored"><a href="#val-mirror" class="anchor"></a><code><span><span class="keyword">val</span> mirror : <span><span class="type-var">'s</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>mirror ax t</code></p><p>Mirrors <code>t</code> on a plane through the origin, defined by the normal vector <code>ax</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-scale" class="anchored"><a href="#val-scale" class="anchor"></a><code><span><span class="keyword">val</span> scale : <span><span class="type-var">'s</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>scale factors t</code></p><p>Scales <code>t</code> by the given <code>factors</code> in xyz.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-resize" class="anchored"><a href="#val-resize" class="anchor"></a><code><span><span class="keyword">val</span> resize : <span><span class="type-var">'s</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>resize dimensions t</code></p><p>Adjusts the size of <code>t</code> to match the given <code>dimensions</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-color" class="anchored"><a href="#val-color" class="anchor"></a><code><span><span class="keyword">val</span> color : <span>?alpha:float <span class="arrow">&#45;&gt;</span></span> <span><a href="../Color/index.html#type-t">Color.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>color ?alpha color t</code></p><p>Displays <code>t</code> with the specified <code>color</code> and <code>?alpha</code> value. This is only used for the F5 preview as CGAL and STL (F6, render) do not currently support color. Defaults to opaque (alpha = 1.0).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-render" class="anchored"><a href="#val-render" class="anchor"></a><code><span><span class="keyword">val</span> render : <span>?convexity:int <span class="arrow">&#45;&gt;</span></span> <span><span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>render ?convexity t</code></p><p>Forces OpenSCAD to render and cache the mesh produced by the given <code>t</code>. This can help to speed up previewing <b>(F5)</b> when the cached shape is used many times. Note that this does however remove any colouration applied previously with <a href="#val-color"><code>color</code></a>, or resulting from boolean operations such as <a href="#val-difference"><code>difference</code></a>. Output rendering <b>(F6)</b> performance is unaffected.</p></div></div><h2 id="3d-only-transformations"><a href="#3d-only-transformations" class="anchor"></a>3d Only Transformations</h2><p>Each of these transformations cannot be restricted to the 2-dimensional xy plane, thus they are restricted to 3d shapes.</p><div class="odoc-spec"><div class="spec value" id="val-vector_rotate" class="anchored"><a href="#val-vector_rotate" class="anchor"></a><code><span><span class="keyword">val</span> vector_rotate : <span><a href="../Vec3/index.html#type-t">Vec3.t</a> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-d3">d3</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-d3">d3</a></span></code></div><div class="spec-doc"><p><code>vector_rotate ax r t</code></p><p>Rotates <code>t</code> about the arbitrary axis <code>ax</code> by the angle <code>r</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-vector_rotate_about_pt" class="anchored"><a href="#val-vector_rotate_about_pt" class="anchor"></a><code><span><span class="keyword">val</span> vector_rotate_about_pt : <span><a href="../Vec3/index.html#type-t">Vec3.t</a> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span><a href="../Vec3/index.html#type-t">Vec3.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-d3">d3</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-d3">d3</a></span></code></div><div class="spec-doc"><p><code>vector_rotate_about_pt ax r p t</code></p><p>Translates <code>t</code> along the vector <code>p</code>, rotating the resulting shape around <code>ax</code> by angle <code>r</code>, and finally, moving back along the vector <code>p</code>. Functionally, rotating about the point in space arrived at by the initial translation along the vector <code>p</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-multmatrix" class="anchored"><a href="#val-multmatrix" class="anchor"></a><code><span><span class="keyword">val</span> multmatrix : <span><a href="../MultMatrix/index.html#type-t">MultMatrix.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-d3">d3</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-d3">d3</a></span></code></div><div class="spec-doc"><p><code>multmatrix mat t</code></p><p>Multiplies the geometry <code>t</code> with the given 4x3 affine transformation matrix. You can find a detailed explanation of how these are formed and interpreted <a href="https://en.wikibooks.org/wiki/OpenSCAD_User_Manual/The_OpenSCAD_Language#multmatrix">here</a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-quaternion" class="anchored"><a href="#val-quaternion" class="anchor"></a><code><span><span class="keyword">val</span> quaternion : <span><a href="../Quaternion/index.html#type-t">Quaternion.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-d3">d3</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-d3">d3</a></span></code></div><div class="spec-doc"><p><code>quaternion q t</code></p><p>Applys the quaternion rotation <code>q</code> to <code>t</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-quaternion_about_pt" class="anchored"><a href="#val-quaternion_about_pt" class="anchor"></a><code><span><span class="keyword">val</span> quaternion_about_pt : <span><a href="../Quaternion/index.html#type-t">Quaternion.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Vec3/index.html#type-t">Vec3.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-d3">d3</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-d3">d3</a></span></code></div><div class="spec-doc"><p><code>quaternion_about_pt q p t</code></p><p>Translates <code>t</code> along the vector <code>p</code>, rotating the resulting shape with the quaternion <code>q</code>, and finally, moving back along the vector <code>p</code>. Functionally, rotating about the point in space arrived at by the initial translation along the vector <code>p</code>.</p></div></div><h2 id="2d-only-transformations"><a href="#2d-only-transformations" class="anchor"></a>2d Only Transformations</h2><div class="odoc-spec"><div class="spec value" id="val-offset" class="anchored"><a href="#val-offset" class="anchor"></a><code><span><span class="keyword">val</span> offset : 
  <span><span>[ <span>`Delta of float</span> <span><span>| `Radius</span> of float</span> <span><span>| `Chamfer</span> of float</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-d2">d2</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-d2">d2</a></span></code></div><div class="spec-doc"><p><code>offset offset t</code></p><p>Generates a new 2D interior or exterior outline from an existing outline <code>t</code>.</p><ul><li><code>`Delta d</code> will create a new outline whose sides are a fixed distance <code>d</code> (+ve out, -ve in) from the original outline.</li><li><code>`Chamfer d</code> fixed distance offset by <code>d</code> as with delta, but with corners chamfered.</li><li><code>`Radius r</code> creates a new outline as if a circle of some radius <code>r</code> is rotated around the exterior (<code>r &gt; 0</code>) or interior (<code>r &lt; 0</code>) original outline.</li></ul><p>Helpful diagrams of what each of these offset styles and chamfering look like can be found <a href="https://en.wikibooks.org/wiki/OpenSCAD_User_Manual/The_OpenSCAD_Language#offset">here</a>.</p></div></div><h2 id="boolean-combination"><a href="#boolean-combination" class="anchor"></a>Boolean Combination</h2><p>Perform boolean operations between shapes of the same dimension (non-mixing of 2d and 3d shapes is enforced by the the GADT <a href="#type-t"><code>t</code></a>. Note that the polymorphic versions of <a href="#val-union"><code>union</code></a>, <a href="#val-minkowski"><code>minkowski</code></a>, <a href="#val-hull"><code>hull</code></a>, and <a href="#val-intersection"><code>intersection</code></a>, throw exceptions when the input list is empty. If empty list inputs are expected, then use the appropriate <code>_2d</code> or <code>_3d</code> variant.</p><div class="odoc-spec"><div class="spec value" id="val-union" class="anchored"><a href="#val-union" class="anchor"></a><code><span><span class="keyword">val</span> union : <span><span><span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>union ts</code></p><p>Creates the union/sum (logical <b>or</b>) <code>ts</code>. Throws an exception if <code>ts</code> is empty, use <a href="#val-union_2d"><code>union_2d</code></a> or <a href="#val-union_3d"><code>union_3d</code></a> if you would like empty unions to pass silently.</p><p><b>Note:</b> It is mandatory for all unions, explicit or implicit, that external faces to be merged not be coincident. Failure to follow this rule results in a design with undefined behavior, and can result in a render which is not manifold (with zero volume portions, or portions inside out), which typically leads to a warning and sometimes removal of a portion of the design from the rendered output. (This can also result in flickering effects during the preview.) This requirement is not a bug, but an intrinsic property of floating point comparisons and the fundamental inability to exactly represent irrational numbers such as those resulting from most rotations.</p><p>The solution to this is to use a small value called an epsilon when merging adjacent faces to guarantee that they overlap, like so:</p><pre><code>let scad =
  let eps = 0.01 in
  let p = { x = 1. -. eps; y = 0.; z = 0. } in
  union [ cube { x = 1.; y = 1.; z = 1. }
        ; translate p (cube { x = 2. +. eps; y = 2.; z = 2. })
        ]</code></pre></div></div><div class="odoc-spec"><div class="spec value" id="val-union_2d" class="anchored"><a href="#val-union_2d" class="anchor"></a><code><span><span class="keyword">val</span> union_2d : <span><span><a href="#type-d2">d2</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-d2">d2</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-union_3d" class="anchored"><a href="#val-union_3d" class="anchor"></a><code><span><span class="keyword">val</span> union_3d : <span><span><a href="#type-d3">d3</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-d3">d3</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-minkowski" class="anchored"><a href="#val-minkowski" class="anchor"></a><code><span><span class="keyword">val</span> minkowski : <span><span><span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>minkowski ts</code></p><p>Displays the minkowski sum of <code>ts</code>. Throws an exception if <code>ts</code> is empty, use <a href="#val-minkowski_2d"><code>minkowski_2d</code></a> or <a href="#val-minkowski_3d"><code>minkowski_3d</code></a> if you would like empty minkowski sums to pass silently.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-minkowski_2d" class="anchored"><a href="#val-minkowski_2d" class="anchor"></a><code><span><span class="keyword">val</span> minkowski_2d : <span><span><a href="#type-d2">d2</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-d2">d2</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-minkowski_3d" class="anchored"><a href="#val-minkowski_3d" class="anchor"></a><code><span><span class="keyword">val</span> minkowski_3d : <span><span><a href="#type-d3">d3</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-d3">d3</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-hull" class="anchored"><a href="#val-hull" class="anchor"></a><code><span><span class="keyword">val</span> hull : <span><span><span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>hull ts</code></p><p>Displays the convex hull of <code>ts</code>. Throws an exception if <code>ts</code> is empty, use <a href="#val-hull_2d"><code>hull_2d</code></a> or <a href="#val-hull_3d"><code>hull_3d</code></a> if you would like empty hulls to pass silently.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-hull_2d" class="anchored"><a href="#val-hull_2d" class="anchor"></a><code><span><span class="keyword">val</span> hull_2d : <span><span><a href="#type-d2">d2</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-d2">d2</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-hull_3d" class="anchored"><a href="#val-hull_3d" class="anchor"></a><code><span><span class="keyword">val</span> hull_3d : <span><span><a href="#type-d3">d3</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-d3">d3</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-difference" class="anchored"><a href="#val-difference" class="anchor"></a><code><span><span class="keyword">val</span> difference : <span><span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>difference t sub</code></p><p>Subracts the shapes of <code>sub</code> from <code>t</code> (logical <b>and not</b>).</p><p><b>Note:</b> It is mandatory that surfaces that are to be removed by a difference operation have an overlap, and that the negative piece being removed extends fully outside of the volume it is removing that surface from. Failure to follow this rule can cause preview artifacts and can result in non-manifold render warnings or the removal of pieces from the render output. See the description above in union for why this is required and an example of how to do this by this using a small epsilon value.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-intersection" class="anchored"><a href="#val-intersection" class="anchor"></a><code><span><span class="keyword">val</span> intersection : <span><span><span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>intersection ts</code></p><p>Creates an in intersection of <code>ts</code>. This keeps the overlapping portion (logical <b>and</b>). Only the area which is common or shared by <b>all</b> shapes are retained. Throws an exception if <code>ts</code> is empty, use <a href="#val-intersection_2d"><code>intersection_2d</code></a> or <a href="#val-intersection_3d"><code>intersection_3d</code></a> if you would like empty intersections to pass silently.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-intersection_2d" class="anchored"><a href="#val-intersection_2d" class="anchor"></a><code><span><span class="keyword">val</span> intersection_2d : <span><span><a href="#type-d2">d2</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-d2">d2</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-intersection_3d" class="anchored"><a href="#val-intersection_3d" class="anchor"></a><code><span><span class="keyword">val</span> intersection_3d : <span><span><a href="#type-d3">d3</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-d3">d3</a></span></code></div></div><h2 id="3d-to-2d"><a href="#3d-to-2d" class="anchor"></a>3d to 2d</h2><div class="odoc-spec"><div class="spec value" id="val-projection" class="anchored"><a href="#val-projection" class="anchor"></a><code><span><span class="keyword">val</span> projection : <span>?cut:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-d3">d3</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-d2">d2</a></span></code></div><div class="spec-doc"><p><code>projection ?cut t</code></p><p>Project a 3D model <code>t</code> to the XY plane, resulting in an infinitely thin 2D shape, which can then be extruded back into 3D, or rendered and exported as a <code>.dxf</code>. If <code>?cut</code> is true, only points with z=0 (a slice of <code>t</code> where it intersects with the XY plane) are considered. When <code>?cut</code> is false (the default when not specified), then points above and below the XY plane will be considered in forming the projection.</p></div></div><h2 id="2d-to-3d-extrusions"><a href="#2d-to-3d-extrusions" class="anchor"></a>2d to 3d extrusions</h2><div class="odoc-spec"><div class="spec value" id="val-linear_extrude" class="anchored"><a href="#val-linear_extrude" class="anchor"></a><code><span><span class="keyword">val</span> linear_extrude : 
  <span>?height:float <span class="arrow">&#45;&gt;</span></span>
  <span>?center:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?convexity:int <span class="arrow">&#45;&gt;</span></span>
  <span>?twist:int <span class="arrow">&#45;&gt;</span></span>
  <span>?slices:int <span class="arrow">&#45;&gt;</span></span>
  <span>?scale:<a href="../Vec2/index.html#type-t">Vec2.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?fn:int <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-d2">d2</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-d3">d3</a></span></code></div><div class="spec-doc"><p><code>linear_extrude ?height ?center ?convexity ?twist ?slices ?scale ?fn t</code></p><p>Takes a 2D object <code>t</code>, and extrudes it upwards from the XY plane to <code>?height</code>. If <code>?center</code> is true, the resulting 3D object is centered around the XY plane, rather than resting on top of it.</p><ul><li><code>?twist</code> rotates the shape by the specified angle as it is extruded upwards</li><li><code>?slices</code> specifies the number of intermediate points along the Z axis of the extrusion. By default this increases with the value of <code>?twist</code>, though manual refinement my improve results.</li><li><code>?scale</code> expands or contracts the shape in X and Y as it is extruded upward. Default is (1., 1.), no scaling.</li><li><code>?convexity</code>: see <a href="#val-polyhedron"><code>polyhedron</code></a> documentation.</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-rotate_extrude" class="anchored"><a href="#val-rotate_extrude" class="anchor"></a><code><span><span class="keyword">val</span> rotate_extrude : 
  <span>?angle:float <span class="arrow">&#45;&gt;</span></span>
  <span>?convexity:int <span class="arrow">&#45;&gt;</span></span>
  <span>?fa:float <span class="arrow">&#45;&gt;</span></span>
  <span>?fs:float <span class="arrow">&#45;&gt;</span></span>
  <span>?fn:int <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-d2">d2</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-d3">d3</a></span></code></div><div class="spec-doc"><p><code>rotate_extrude ?angle ?convexity ?fa ?fs ?fn t</code></p><p>Spins a 2D shape <code>t</code> around the Z-axis in an arc of <code>?angle</code> (default = 2Ï€) to form a solid which has rotational symmetry. Since <code>t</code> is actually 2D (and does not really exist in Z), it is more like it is spun around the Y-axis to form the solid, which is then placed so that its axis of rotation lies along the Z-axis. For this reason, <code>t</code> <b>must</b> lie completely on either the right (recommended) or the left side of the Y-axis. Further explaination and examples can be found <a href="https://en.wikibooks.org/wiki/OpenSCAD_User_Manual/The_OpenSCAD_Language#Rotate_Extrude">here</a>.</p></div></div><h2 id="external-(non-scad)-format-import"><a href="#external-(non-scad)-format-import" class="anchor"></a>External (non-SCAD) Format Import</h2><div class="odoc-spec"><div class="spec value" id="val-import_2d" class="anchored"><a href="#val-import_2d" class="anchor"></a><code><span><span class="keyword">val</span> import_2d : <span>?dxf_layer:string <span class="arrow">&#45;&gt;</span></span> <span>?convexity:int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-d2">d2</a></span></code></div><div class="spec-doc"><p><code>import_2d ?dxf_layer ?convexity file</code></p><p>Imports a <code>file</code> for use in the current OpenSCAD model. The file extension is used to determine which type. If <code>file</code> is a <code>.dxf</code>, <code>?dxf_layer</code> can be used to indicate a specific layer for import. Throws exception if the extension does not match (case insensitive) one of the following 2D formats:</p><ul><li>DXF</li><li>SVG (<i>Requires version 2019.05 of OpenSCAD</i>)</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-import_3d" class="anchored"><a href="#val-import_3d" class="anchor"></a><code><span><span class="keyword">val</span> import_3d : <span>?convexity:int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-d3">d3</a></span></code></div><div class="spec-doc"><p><code>import_3d ?convexity file</code></p><p>Imports <code>file</code> for use in the current OpenSCAD model. The file extension is used to determine which type. Throws exception if the extension does not match (case insensitive) one of the following 3D formats:</p><ul><li>STL (<i>both ASCII and Binary</i>)</li><li>OFF</li><li>AMF (<i>Requires version 2019.05 of OpenSCAD</i>)</li><li>3MF (<i>Requires version 2019.05 of OpenSCAD</i>)</li></ul></div></div><h2 id="output"><a href="#output" class="anchor"></a>Output</h2><div class="odoc-spec"><div class="spec value" id="val-to_string" class="anchored"><a href="#val-to_string" class="anchor"></a><code><span><span class="keyword">val</span> to_string : <span><span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>to_string t</code></p><p>Convert the scad <code>t</code> to a string in the OpenSCAD language.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_file" class="anchored"><a href="#val-to_file" class="anchor"></a><code><span><span class="keyword">val</span> to_file : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><span>( <span class="type-var">'s</span>, <span class="type-var">'r</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>to_file path t</code></p><p>Write the scad <code>t</code> to a file at the given <code>path</code>, as an OpenSCAD script (using <a href="#val-to_string"><code>to_string</code></a>).</p></div></div><h2 id="infix-operators"><a href="#infix-operators" class="anchor"></a>Infix Operators</h2><div class="odoc-spec"><div class="spec module" id="module-Infix" class="anchored"><a href="#module-Infix" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Infix/index.html">Infix</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>