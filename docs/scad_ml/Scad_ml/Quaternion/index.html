<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Quaternion (scad_ml.Scad_ml.Quaternion)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">scad_ml</a> &#x00BB; <a href="../index.html">Scad_ml</a> &#x00BB; Quaternion</nav><h1>Module <code>Scad_ml.Quaternion</code></h1><p>Provides functions for the creation of and operations between <a href="https://en.wikipedia.org/wiki/Quaternion">quaternions</a>. These can be used to create composable and interpolatable rotations to be applied to vectors (e.g. <a href="../Vec3/index.html#type-t"><code>Vec3.t</code></a>) directly, and <a href="../Scad/index.html#type-t"><code>Scad.t</code></a> through <a href="../MultMatrix/index.html#type-t"><code>MultMatrix.t</code></a>.</p><nav class="toc"><ul><li><a href="#basic-arithmetic">Basic Arithmetic</a></li><li><a href="#vector-math">Vector Math</a></li><li><a href="#matrix-conversions">Matrix Conversions</a></li><li><a href="#utilities">Utilities</a></li><li><a href="#vector-transformations">Vector Transformations</a></li></ul></nav></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code><code> = float * float * float * float</code></dt></dl><dl><dt class="spec value" id="val-id"><a href="#val-id" class="anchor"></a><code><span class="keyword">val</span> id : <a href="index.html#type-t">t</a></code></dt><dd><p>The identity quaternion: <code>(0., 0., 0., 1.)</code></p></dd></dl><dl><dt class="spec value" id="val-make"><a href="#val-make" class="anchor"></a><code><span class="keyword">val</span> make : <a href="../Vec3/index.html#type-t">Vec3.t</a> <span>&#45;&gt;</span> float <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>make ax angle</code></p><p>Create a quaternion representing a rotation of <code>angle</code> (in radians) around the vector <code>ax</code>.</p></dd></dl><section><header><h2 id="basic-arithmetic"><a href="#basic-arithmetic" class="anchor"></a>Basic Arithmetic</h2></header><dl><dt class="spec value" id="val-add"><a href="#val-add" class="anchor"></a><code><span class="keyword">val</span> add : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>add a b</code></p><p>Hadamard (element-wise) addition of quaternions <code>a</code> and <code>b</code>.</p></dd></dl><dl><dt class="spec value" id="val-sub"><a href="#val-sub" class="anchor"></a><code><span class="keyword">val</span> sub : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>sub a b</code></p><p>Hadamard (element-wise) subtraction of quaternion <code>b</code> from <code>a</code>.</p></dd></dl><dl><dt class="spec value" id="val-mul"><a href="#val-mul" class="anchor"></a><code><span class="keyword">val</span> mul : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>mul a b</code></p><p>Quaternion multiplication of <code>a</code> and <code>b</code>.</p></dd></dl><dl><dt class="spec value" id="val-negate"><a href="#val-negate" class="anchor"></a><code><span class="keyword">val</span> negate : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>negate t</code></p><p>Negation of all elements of <code>t</code>.</p></dd></dl><dl><dt class="spec value" id="val-add_scalar"><a href="#val-add_scalar" class="anchor"></a><code><span class="keyword">val</span> add_scalar : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> float <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>add_scalar t s</code></p><p>Add <code>s</code> to the magnitude of <code>t</code>, leaving the imaginary parts unchanged.</p></dd></dl><dl><dt class="spec value" id="val-sub_scalar"><a href="#val-sub_scalar" class="anchor"></a><code><span class="keyword">val</span> sub_scalar : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> float <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>sub_scalar t s</code></p><p>Subtract <code>s</code> from the magnitude of <code>t</code>, leaving the imaginary parts unchanged.</p></dd></dl><dl><dt class="spec value" id="val-scalar_sub_quat"><a href="#val-scalar_sub_quat" class="anchor"></a><code><span class="keyword">val</span> scalar_sub_quat : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> float <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>scalar_sub_quat t s</code></p><p>Negate the imaginary parts of <code>t</code>, and subtract the magnitude from <code>s</code> to obtain the new magnitude.</p></dd></dl><dl><dt class="spec value" id="val-mul_scalar"><a href="#val-mul_scalar" class="anchor"></a><code><span class="keyword">val</span> mul_scalar : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> float <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>mul_scalar t s</code></p><p>Element-wise multiplication of <code>t</code> by <code>s</code>.</p></dd></dl><dl><dt class="spec value" id="val-div_scalar"><a href="#val-div_scalar" class="anchor"></a><code><span class="keyword">val</span> div_scalar : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> float <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>div_scalar t s</code></p><p>Element-wise division of <code>t</code> by <code>s</code>.</p></dd></dl></section><section><header><h2 id="vector-math"><a href="#vector-math" class="anchor"></a>Vector Math</h2></header><dl><dt class="spec value" id="val-norm"><a href="#val-norm" class="anchor"></a><code><span class="keyword">val</span> norm : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> float</code></dt><dd><p><code>norm t</code></p><p>Calculate the vector norm (a.k.a. magnitude) of <code>t</code>.</p></dd></dl><dl><dt class="spec value" id="val-normalize"><a href="#val-normalize" class="anchor"></a><code><span class="keyword">val</span> normalize : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>normalize t</code></p><p>Normalize <code>t</code> to a quaternion for which the magnitude is equal to 1. e.g. <code>norm (normalize t) = 1.</code></p></dd></dl><dl><dt class="spec value" id="val-dot"><a href="#val-dot" class="anchor"></a><code><span class="keyword">val</span> dot : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> float</code></dt><dd><p><code>dot a b</code></p><p>Vector dot product of <code>a</code> and <code>b</code>.</p></dd></dl><dl><dt class="spec value" id="val-conj"><a href="#val-conj" class="anchor"></a><code><span class="keyword">val</span> conj : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>conj t</code></p><p>Take the conjugate of the quaternion <code>t</code>, negating the imaginary parts (x, y, and z) of <code>t</code>, leaving the magnitude unchanged.</p></dd></dl><dl><dt class="spec value" id="val-distance"><a href="#val-distance" class="anchor"></a><code><span class="keyword">val</span> distance : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> float</code></dt><dd><p><code>distance a b</code></p><p>Calculate the magnitude of the difference (Hadamard subtraction) between <code>a</code> and <code>b</code>.</p></dd></dl></section><section><header><h2 id="matrix-conversions"><a href="#matrix-conversions" class="anchor"></a>Matrix Conversions</h2></header><dl><dt class="spec value" id="val-of_rotmatrix"><a href="#val-of_rotmatrix" class="anchor"></a><code><span class="keyword">val</span> of_rotmatrix : <a href="../RotMatrix/index.html#type-t">RotMatrix.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-to_multmatrix"><a href="#val-to_multmatrix" class="anchor"></a><code><span class="keyword">val</span> to_multmatrix : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../MultMatrix/index.html#type-t">MultMatrix.t</a></code></dt></dl></section><section><header><h2 id="utilities"><a href="#utilities" class="anchor"></a>Utilities</h2></header><dl><dt class="spec value" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span class="keyword">val</span> to_string : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string</code></dt><dt class="spec value" id="val-get_x"><a href="#val-get_x" class="anchor"></a><code><span class="keyword">val</span> get_x : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> float</code></dt><dt class="spec value" id="val-get_y"><a href="#val-get_y" class="anchor"></a><code><span class="keyword">val</span> get_y : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> float</code></dt><dt class="spec value" id="val-get_z"><a href="#val-get_z" class="anchor"></a><code><span class="keyword">val</span> get_z : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> float</code></dt><dt class="spec value" id="val-get_w"><a href="#val-get_w" class="anchor"></a><code><span class="keyword">val</span> get_w : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> float</code></dt><dt class="spec value" id="val-slerp"><a href="#val-slerp" class="anchor"></a><code><span class="keyword">val</span> slerp : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> float <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>slerp a b step</code></p><p>Spherical linear interpotation. Adapted from <a href="https://github.com/KieranWynn/pyquaternion">pyquaternion</a>.</p></dd></dl></section><section><header><h2 id="vector-transformations"><a href="#vector-transformations" class="anchor"></a>Vector Transformations</h2></header><dl><dt class="spec value" id="val-rotate_vec3"><a href="#val-rotate_vec3" class="anchor"></a><code><span class="keyword">val</span> rotate_vec3 : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../Vec3/index.html#type-t">Vec3.t</a> <span>&#45;&gt;</span> <a href="../Vec3/index.html#type-t">Vec3.t</a></code></dt><dd><p><code>rotate_vec3 t v</code></p><p>Rotate <code>v</code> with the quaternion <code>t</code>.</p></dd></dl><dl><dt class="spec value" id="val-rotate_vec3_about_pt"><a href="#val-rotate_vec3_about_pt" class="anchor"></a><code><span class="keyword">val</span> rotate_vec3_about_pt : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../Vec3/index.html#type-t">Vec3.t</a> <span>&#45;&gt;</span> <a href="../Vec3/index.html#type-t">Vec3.t</a> <span>&#45;&gt;</span> <a href="../Vec3/index.html#type-t">Vec3.t</a></code></dt><dd><p><code>rotate_vec3_about_pt t p v</code></p><p>Translates <code>v</code> along the vector <code>p</code>, rotating the resulting vector with the quaternion <code>t</code>, and finally, moving back along the vector <code>p</code>. Functionally, rotating about the point in space arrived at by the initial translation along the vector <code>p</code>.</p></dd></dl><dl><dt class="spec value" id="val-alignment"><a href="#val-alignment" class="anchor"></a><code><span class="keyword">val</span> alignment : <a href="../Vec3/index.html#type-t">Vec3.t</a> <span>&#45;&gt;</span> <a href="../Vec3/index.html#type-t">Vec3.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>alignment a b</code></p><p>Calculate a quaternion that would bring <code>a</code> into alignment with <code>b</code>.</p></dd></dl></section></div></body></html>